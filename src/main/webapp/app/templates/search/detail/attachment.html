<div ng-include="'app/templates/main/partial/detailview_header.html'"></div>

<div id="elementToFocus" tabindex="1" style="outline: 0" ng-arrow-left="detailCtrl.reload({table:'attachment', left:true})" ng-arrow-right="detailCtrl.reload({table:'attachment', right:true})"  class="panel detailview-page">
    <div class="panel-body" data-ng-if="detailCtrl.results != null">


        <div class="row">

            <div class="col-lg-6" bs-loading-overlay bs-loading-overlay-reference-id="detailView" bs-loading-overlay-template-url="app/templates/main/partial/loading.overlay.html">

                <div class="detailview-title">
                    <h2>
                        {{ 'DETAIL.ATTACHMENT.HEADING' | translate }}:
                        <localize et="detailCtrl.results.description" en="detailCtrl.results.description_en"/>
                    </h2>
                    <div>
                        <em>(ID: {{detailCtrl.results.id}})</em>
                    </div>
                </div>

                <h3> {{ 'DETAILVIEW_TABLE_HEADER' | translate }} </h3>
                <table class="table table-bordered table-hover table-header-styles">

                    <tr data-ng-if="(detailCtrl.results.type__value && detailCtrl.results.type__value != null)
                        || (detailCtrl.results.type__value_en && detailCtrl.results.type__value_en != null)">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.TYPE' | translate }} </td>
                        <td>
                            <localize et="detailCtrl.results.type__value" en="detailCtrl.results.type__value_en" />
                        </td>
                    </tr>

                    <tr data-ng-if="(detailCtrl.results.description && detailCtrl.results.description != null)
                        || (detailCtrl.results.description_en && detailCtrl.results.description_en != null)">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.DESCRIPTION' | translate }} </td>
                        <td>
                            <localize et="detailCtrl.results.description" en="detailCtrl.results.description_en"/>
                        </td>
                    </tr>

                    <tr data-ng-if="detailCtrl.results.author__agent && detailCtrl.results.author__agent != null">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.AUTHOR ' | translate }} </td>
                        <td> {{ detailCtrl.results.author__agent }} </td>
                    </tr>

                    <tr data-ng-if="detailCtrl.results.author__agent == null && (detailCtrl.results.author_free != null && detailCtrl.results.author_free)">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.AUTHOR ' | translate }} </td>
                        <td> {{ detailCtrl.results.author_free }} </td>
                    </tr>

                    <tr data-ng-if="detailCtrl.results.date_created && detailCtrl.results.date_created != null">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.DATE ' | translate }} </td>
                        <td> {{ detailCtrl.results.date_created | date:dateFormat }} </td>
                    </tr>

                    <tr data-ng-if="detailCtrl.results.date_created == null && (detailCtrl.results.date_created_free && detailCtrl.results.date_created_free != null)">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.DATE ' | translate }} </td>
                        <td> {{ detailCtrl.results.date_created_free }} </td>
                    </tr>

                    <!--TODO: Keywords-->

                    <tr data-ng-if="detailCtrl.results.attachment_format__value && detailCtrl.results.attachment_format__value != null">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.FORMAT' | translate }} </td>
                        <td> {{ detailCtrl.results.attachment_format__value }} </td>
                    </tr>

                    <tr data-ng-if="detailCtrl.results.filename && detailCtrl.results.filename != null">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.FILENAME' | translate }} </td>
                        <td>
                            <a target="_blank" ng-href="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}">
                                <i data-ng-if="detailCtrl.results.filename.endsWith('pdf')"
                                    title="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}"
                                    class="fa fa-file-pdf-o fa-2x" aria-hidden="true"></i>

                                <i data-ng-if="detailCtrl.results.filename.endsWith('txt')"
                                    title="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}"
                                    class="fa fa-file-text-o fa-2x" aria-hidden="true"></i>

                                <i data-ng-if="detailCtrl.results.filename.endsWith('xlsx') || detailCtrl.results.filename.endsWith('ods')"
                                    title="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}"
                                    class="fa fa-file-excel-o fa-2x" aria-hidden="true"></i>

                                <span data-ng-if="detailCtrl.results.filename.endsWith('png') || detailCtrl.results.filename.endsWith('jpeg') || detailCtrl.results.filename.endsWith('svg') || detailCtrl.results.filename.endsWith('jpg')">
                                    {{ detailCtrl.results.filename }}
                                </span>
                                <!--<img title="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}"-->
                                    <!--data-ng-if="detailCtrl.results.filename.endsWith('png') || detailCtrl.results.filename.endsWith('jpeg') || detailCtrl.results.filename.endsWith('svg') || detailCtrl.results.filename.endsWith('jpg')"-->
                                    <!--class="previewImage"-->
                                    <!--src="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}"/>-->
                            </a>
                        </td>
                    </tr>

                    <tr data-ng-if="detailCtrl.results.device__name && detailCtrl.results.device__name != null">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.DEVICE' | translate }} </td>
                        <td> {{ detailCtrl.results.device__name }} </td>
                    </tr>

                    <!--TODO: Device free-->

                    <tr data-ng-if="detailCtrl.results.agent_digitised__agent && detailCtrl.results.agent_digitised__agent != null">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.PERSON_DIGITISED' | translate }} </td>
                        <td> {{ detailCtrl.results.agent_digitised__agent }} </td>
                    </tr>

                    <tr data-ng-if="detailCtrl.results.date_digitised && detailCtrl.results.date_digitised != null">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.DATE_DIGITISED' | translate }} </td>
                        <td> {{ detailCtrl.results.date_digitised | date:dateFormat }} </td>
                    </tr>

                    <tr data-ng-if="detailCtrl.results.date_digitised == null && (detailCtrl.results.date_digitised_free && detailCtrl.results.date_digitised_free != null)">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.DATE_DIGITISED' | translate }} </td>
                        <td> {{ detailCtrl.results.date_digitised_free }} </td>
                    </tr>

                    <tr data-ng-if="(detailCtrl.results.remarks && detailCtrl.results.remarks != null)">
                        <td> {{ 'API_TRANSLATION.ATTACHMENT.REMARKS' | translate }} </td>
                        <td> {{ detailCtrl.results.remarks }} </td>
                    </tr>

                    <!--TODO: licence-->

                    <!--TODO: record added-->

                    <!--TODO: record changed-->

                </table>
            </div>


            <div class="col-lg-6">
                <div data-ng-if="detailCtrl.results.filename != null">
                    <div data-ng-if="detailCtrl.results.filename.endsWith('png') || detailCtrl.results.filename.endsWith('jpeg') || detailCtrl.results.filename.endsWith('svg') || detailCtrl.results.filename.endsWith('jpg')">
                        <h3> {{ 'API_TRANSLATION.PHOTO_ARCHIVE.PHOTO' | translate }} </h3>

                        <a href title="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}" data-ng-click="detailCtrl.service.openUrlInNewWindow({url: detailCtrl.service.getDownloadLink(detailCtrl.results.filename)})">
                            <img id="img-size" spinner-load ng-src="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}" class="window-size"/>
                        </a>

                        <!--<div class="img-settings">-->
                            <!--<div class="img-text">-->
                                <!--{{'API_TRANSLATION.PHOTO_ARCHIVE.SIZE ' | translate }}:-->
                                <!--<a href="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}/600" target="_blank">600px</a>-->
                                <!--| <a href="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}/1024" target="_blank">1024px</a>-->
                                <!--| <a href="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}/1440" target="_blank">1440px</a>-->
                                <!--| <a href="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}/1600" target="_blank">1600px</a>-->
                                <!--| <a href="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}/1920" target="_blank">1920px</a>-->
                                <!--| <a href="{{detailCtrl.service.getDownloadLink(detailCtrl.results.filename)}}" target="_blank">Original</a>-->

                            <!--</div>-->
                        <!--</div>-->

                    </div>
                </div>
            </div>


            <!--TODO: All relations-->


        </div>
    </div>


    <div data-ng-if="detailCtrl.results == null && pageHasError" ng-include="'app/templates/main/detailview_error.html'"></div>

</div>

<div ng-include="'app/templates/main/partial/detailview_footer.html'"></div>

<script>
    $(function(){
        $('#elementToFocus').focus();
    });
</script>