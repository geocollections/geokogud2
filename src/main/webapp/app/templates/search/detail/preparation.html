<div ng-include="'app/templates/main/partial/detailview_header.html'"></div>

<div class="panel detailview-page">
    <div class="panel-body">

        <div class="row">
            <div class="col-lg-6" bs-loading-overlay bs-loading-overlay-reference-id="detailView" bs-loading-overlay-template-url="app/templates/main/partial/loading.overlay.html">

                <div class="detailview-title">
                    <h2>{{'API_TRANSLATION.PREPARATION.DETAIL_FORM_NAME' | translate }}
                        {{detailCtrl.results.preparation_number}}
                    </h2>
                    <h4>
                        <em>(ID: {{detailCtrl.results.id}})</em>
                    </h4>
                </div>

                <table class="table table-bordered table-hover table-header-styles">
                    <thead>
                    </thead>
                    <tbody>

                         <tr data-ng-if="detailCtrl.results.sample_id && detailCtrl.results.sample_id != null" >
                             <td>{{ 'API_TRANSLATION.PREPARATION.SAMPLE_ID ' | translate }}</td>
                             <td>
                                 <a href data-ng-click="detailCtrl.service.openInNewWindow({object:'sample',id:detailCtrl.results.sample_id})">
                                     {{detailCtrl.results.sample_id}}
                                 </a>
                             </td>
                         </tr>

                         <tr data-ng-if="(detailCtrl.results.sample__locality__locality && detailCtrl.results.sample__locality__locality != null) || (detailCtrl.results.sample__locality__locality_en && detailCtrl.results.sample__locality__locality_en != null) ">
                             <td>
                                 <localize-label et="'API_TRANSLATION.PREPARATION.SAMPLE__LOCALITY__LOCALITY'"
                                                 en="'API_TRANSLATION.PREPARATION.SAMPLE__LOCALITY__LOCALITY_EN'"/>
                             </td>
                             <td>
                                 <a href data-ng-click="detailCtrl.service.openInNewWindow({object:'locality',id:detailCtrl.results.sample__locality__id})">
                                    <localize et="detailCtrl.results.sample__locality__locality"
                                              en="detailCtrl.results.sample__locality__locality_en"/>
                                 </a>
                             </td>
                         </tr>

                         <tr data-ng-if="detailCtrl.results.sample__depth && detailCtrl.results.sample__depth != null">
                             <td> {{ 'API_TRANSLATION.PREPARATION.SAMPLE__DEPTH ' | translate }} </td>
                             <td> {{ detailCtrl.results.sample__depth }} </td>
                         </tr>

                         <tr data-ng-if="detailCtrl.results.sample__depth_interval && detailCtrl.results.sample__depth_interval != null" >
                             <td> {{ 'API_TRANSLATION.PREPARATION.SAMPLE__DEPTH_INTERVAL ' | translate }} </td>
                             <td> {{ detailCtrl.results.sample__depth_interval }} </td>
                         </tr>


                         <tr data-ng-if="(detailCtrl.results.sample__stratigraphy__stratigraphy && detailCtrl.results.sample__stratigraphy__stratigraphy != null) || (detailCtrl.results.sample__stratigraphy__stratigraphy_en && detailCtrl.results.sample__stratigraphy__stratigraphy_en != null) ">
                             <td>
                                 <localize-label et="'API_TRANSLATION.PREPARATION.SAMPLE__STRATIGRAPHY__STRATIGRAPHY'"
                                                 en="'API_TRANSLATION.PREPARATION.SAMPLE__STRATIGRAPHY__STRATIGRAPHY_EN'"/>
                             </td>
                             <td>
                                 <a href data-ng-click="detailCtrl.service.openInNewWindow({object:'stratigraphy',id:detailCtrl.results.sample__stratigraphy__id})">
                                     <localize et="detailCtrl.results.sample__stratigraphy__stratigraphy"
                                               en="detailCtrl.results.sample__stratigraphy__stratigraphy_en"/>
                                 </a>
                             </td>
                         </tr>

                         <tr data-ng-if="detailCtrl.results.sample__stratigraphy_free && detailCtrl.results.sample__stratigraphy_free != null" >
                             <td> {{ 'API_TRANSLATION.PREPARATION.SAMPLE__STRATIGRAPHY_FREE ' | translate }} </td>
                             <td> {{ detailCtrl.results.sample__stratigraphy_free }} </td>
                         </tr>

                         <tr data-ng-if="(detailCtrl.results.sample__lithostratigraphy__stratigraphy && detailCtrl.results.sample__lithostratigraphy__stratigraphy != null) || (detailCtrl.results.sample__lithostratigraphy__stratigraphy_en && detailCtrl.results.sample__lithostratigraphy__stratigraphy_en != null) ">
                             <td>
                                 <localize-label et="'API_TRANSLATION.PREPARATION.SAMPLE__LITHOSTRATIGRAPHY__STRATIGRAPHY'"
                                                 en="'API_TRANSLATION.PREPARATION.SAMPLE__LITHOSTRATIGRAPHY__STRATIGRAPHY_EN'"/>
                             </td>
                             <td>
                                 <a href data-ng-click="detailCtrl.service.openInNewWindow({object: 'stratigraphy', id: detailCtrl.results.sample__lithostratigraphy_id})">
                                     <localize et="detailCtrl.results.sample__lithostratigraphy__stratigraphy"
                                               en="detailCtrl.results.sample__lithostratigraphy__stratigraphy_en"/>
                                 </a>
                             </td>
                         </tr>
                         <!--<tr data-ng-if="detailCtrl.results.sample__lithostratigraphy__stratigraphy && detailCtrl.results.sample__lithostratigraphy__stratigraphy != null" ><td>{{ 'API_TRANSLATION.PREPARATION.SAMPLE__LITHOSTRATIGRAPHY__STRATIGRAPHY ' | translate }}</td><td> {{detailCtrl.results.sample__lithostratigraphy__stratigraphy}}</td></tr>
                         <tr data-ng-if="detailCtrl.results.sample__lithostratigraphy__stratigraphy_en && detailCtrl.results.sample__lithostratigraphy__stratigraphy_en != null" ><td>{{ 'API_TRANSLATION.PREPARATION.SAMPLE__LITHOSTRATIGRAPHY__STRATIGRAPHY_EN ' | translate }}</td><td> {{detailCtrl.results.sample__lithostratigraphy__stratigraphy_en}}</td></tr>
                         -->
                         <!--<tr data-ng-if="detailCtrl.results.classification__class_field && detailCtrl.results.classification__class_field != null" ><td>{{ 'API_TRANSLATION.PREPARATION.CLASSIFICATION__CLASS_FIELD ' | translate }}</td><td> {{detailCtrl.results.classification__class_field}}</td></tr>
                         <tr data-ng-if="detailCtrl.results.classification__class_en && detailCtrl.results.classification__class_en != null" ><td>{{ 'API_TRANSLATION.PREPARATION.CLASSIFICATION__CLASS_EN ' | translate }}</td><td> {{detailCtrl.results.classification__class_en}}</td></tr>
                         -->

                         <tr data-ng-if="detailCtrl.results.location && detailCtrl.results.location != null" ><td>{{ 'API_TRANSLATION.PREPARATION.LOCATION ' | translate }}</td><td> {{detailCtrl.results.location}}</td></tr>
                         <tr data-ng-if="detailCtrl.results.storage__location && detailCtrl.results.storage__location != null" ><td>{{ 'API_TRANSLATION.PREPARATION.STORAGE__LOCATION ' | translate }}</td><td> {{detailCtrl.results.storage__location}}</td></tr>
                         <tr data-ng-if="detailCtrl.results.storage__location_location && detailCtrl.results.storage__location_location != null" ><td>{{ 'API_TRANSLATION.PREPARATION.STORAGE__LOCATION_LOCATION ' | translate }}</td><td> {{detailCtrl.results.storage__location_location}}</td></tr>

                         <tr data-ng-if="(detailCtrl.results.classification__class_field && detailCtrl.results.classification__class_field != null)
                            || (detailCtrl.results.classification__class_en && detailCtrl.results.classification__class_en != null) ">
                             <td>
                                 <localize-label et="'API_TRANSLATION.PREPARATION.CLASSIFICATION__CLASS_FIELD'"
                                                 en="'API_TRANSLATION.PREPARATION.CLASSIFICATION__CLASS_EN'"/>
                             </td>
                             <td>
                                 <localize et="detailCtrl.results.classification__class_field" en="detailCtrl.results.classification__class_en"/>
                             </td>
                         </tr>

                         <tr data-ng-if="detailCtrl.results.sample__agent_collected__agent && detailCtrl.results.sample__agent_collected__agent != null" >
                             <td> {{ 'API_TRANSLATION.PREPARATION.SAMPLE__AGENT_COLLECTED__AGENT' | translate }} </td>
                             <td> {{ detailCtrl.results.sample__agent_collected__agent }} </td>
                         </tr>

                         <tr data-ng-if="(detailCtrl.results.sample__agent_collected__forename && detailCtrl.results.sample__agent_collected__forename != null
                            || detailCtrl.results.sample__agent_collected__surename && detailCtrl.results.sample__agent_collected__surename != null)
                            && detailCtrl.results.sample__agent_collected__agent == null" >
                             <td> {{ 'API_TRANSLATION.PREPARATION.SAMPLE__AGENT_COLLECTED__AGENT' | translate }} </td>
                             <td> {{ detailCtrl.results.sample__agent_collected__forename }} {{ detailCtrl.results.sample__agent_collected__surename }} </td>
                         </tr>

                         <tr data-ng-if="detailCtrl.results.sample__agent_collected_free && detailCtrl.results.sample__agent_collected_free != null
                            && detailCtrl.results.sample__agent_collected__agent == null
                            && (detailCtrl.results.sample__agent_collected__forename == null || detailCtrl.results.sample__agent_collected__surename == null)" >
                             <td> {{ 'API_TRANSLATION.PREPARATION.SAMPLE__AGENT_COLLECTED_FREE' | translate }} </td>
                             <td> {{ detailCtrl.results.sample__agent_collected_free }} </td>
                         </tr>

                         <tr data-ng-if="detailCtrl.results.date_added && detailCtrl.results.date_added != null" >
                             <td>{{ 'API_TRANSLATION.PREPARATION.DATE_ADDED ' | translate }}</td>
                             <td> {{detailCtrl.results.date_added | date:dateFormat}}</td>
                         </tr>

                         <tr data-ng-if="detailCtrl.results.date_changed && detailCtrl.results.date_changed != null" >
                             <td>{{ 'API_TRANSLATION.PREPARATION.DATE_CHANGED ' | translate }}</td>
                             <td> {{detailCtrl.results.date_changed | date:dateFormat}}</td>
                         </tr>
                    </tbody>
                </table>
            </div>

            <div class="col-lg-6" data-ng-if="detailCtrl.preparationTaxons.length > 0">
                <h2> {{ 'API_TRANSLATION.PREPARATION.TAXONS' | translate }} </h2>
                <table class="table table-bordered table-hover">
                    <thead class="styles-for-table-headers">
                        <tr>
                            <td>{{ 'API_TRANSLATION.PREPARATION.TAXONS_NAME ' | translate }}</td>
                            <td>{{ 'API_TRANSLATION.PREPARATION.TAXONS_FREQUENCY ' | translate }}</td>
                            <td>%</td>
                            <td>{{ 'API_TRANSLATION.PREPARATION.TAXONS_REMARKS ' | translate }}</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-ng-repeat="entity in detailCtrl.preparationTaxons | orderBy: '-taxonFrequency'">
                            <td data-ng-if="entity.taxonId != null">
                                <a href data-ng-click="detailCtrl.service.openUrlInNewWindow({url:'http://fossiilid.info/'+entity.taxonId})">
                                    <i>{{entity.taxonTaxon}}</i>
                                </a>
                            </td>
                            <td data-ng-if="entity.taxonId === null">
                                <i> {{ entity.taxonName }} </i>
                            </td>
                            <td> {{ entity.taxonFrequency }} </td>
                            <td data-ng-if="entity.percent > 0"> {{ entity.percent }} </td>
                            <td data-ng-if="detailCtrl.results.taxonlist__frequency === null"></td>
                            <td> {{ entity.taxonRemarks }} </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>

    </div>
</div>

<div ng-include="'app/templates/main/partial/detailview_footer.html'"></div>