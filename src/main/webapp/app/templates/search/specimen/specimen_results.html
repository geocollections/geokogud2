
<div class="row">
    <div class="col-xs-6" ng-include="'app/templates/search/partial/export_buttons.html'"></div>
    <div class="col-xs-6" ng-include="'app/templates/search/partial/pagination.html'" data-ng-if="!main.isGlobalSearch()"></div>
</div>

<div class="table-responsive" data-ng-if="!showImages">
    <table class="table table-bordered table-hover" id="table-search">
        <thead class="thead-default">
        <tr>
            <!--<th><sort-field value = "id" name="SEARCH.SPECIMENS.ID"></sort-field></th>-->
            <th><sort-field value = "specimen_id" name="SEARCH.SPECIMENS.NUMBER"></sort-field></th>
            <th><sort-field value = "specimen_nr" name="SEARCH.SPECIMENS.OLD_SPECIMEN_NUMBER"></sort-field></th>
            <th><sort-field value = "specimenidentification__name" name="SEARCH.SPECIMENS.NAME_PART_ELEMENT"></sort-field></th>
            <th><sort-field value = "locality__locality,locality__locality_en" name="SEARCH.SPECIMENS.LOCALITY"></sort-field></th>
            <th><sort-field value = "depth" name="SEARCH.SPECIMENS.DEPHT_M"></sort-field></th>
            <th>
                <sort-field value = "stratigraphy__stratigraphy,stratigraphy__stratigraphy_en"
                            name="SEARCH.SPECIMENS.STRATIGRAPHY">
                </sort-field> | <em> {{ 'SEARCH.SPECIMENS.LITHOSTRATIGRAPHY' | translate }} </em>
            </th>
            <th><sort-field value = "agent_collected__agent" name="SEARCH.SPECIMENS.COLLECTOR"></sort-field></th>
            <th><sort-field value = "original_status__value,original_status__value_en" name="SEARCH.SPECIMENS.STATUS"></sort-field></th>
            <th>{{ 'SEARCH.SPECIMENS.IMAGES' | translate }}</th>
        </tr>
        </thead>
        <tbody>
            <tr data-ng-repeat="entity in response.results track by $index">

                <td data-title="{{ 'SEARCH.SPECIMENS.NUMBER' | translate }}">
                    <a href data-ng-click="ctrl.service.openInNewWindow({object:'specimen',id:entity.id})">
                        {{ entity.coll__number | split:' ':0 }} {{ entity.specimen_id }}
                    </a>
                </td>

                <td data-title="{{ 'SEARCH.SPECIMENS.OLD_SPECIMEN_NUMBER' | translate }}"> {{ entity.specimen_nr }} </td>

                <td data-title="{{ 'SEARCH.SPECIMENS.NAME_PART_ELEMENT' | translate }}">
                    <span data-ng-if="entity.specimenidentification__taxon_id != null && entity.specimenidentification__taxon__taxon != null">
                        <a href data-ng-click="ctrl.service.openUrlInNewWindow({url:'http://fossiilid.info/' + entity.specimenidentification__taxon_id})">
                            {{entity.specimenidentification__taxon__taxon}}
                        </a>
                    </span>

                    <!-- TODO: not sure if right field -->
                    <span data-ng-if="entity.specimenidentification__name && entity.specimenidentification__name != null">
                         | {{ entity.specimenidentification__name }}
                    </span>

                </td>

                <td data-title="{{ 'SEARCH.SPECIMENS.LOCALITY' | translate }}">
                    <div data-ng-if="entity.locality__locality != null && entity.locality__locality_en != null">
                        <a href data-ng-click="ctrl.service.openInNewWindow({object:'locality',id:entity.locality_id})">
                            <localize et="entity.locality__locality" en="entity.locality__locality_en"/>
                        </a>
                    </div>

                    <div data-ng-if="entity.locality__locality == null && entity.locality__locality_en == null">
                        {{ entity.locality_free }}
                    </div>
                </td>

                <td data-title="{{ 'SEARCH.SPECIMENS.DEPTH_M' | translate }}">
                    {{entity.depth}}
                    <span ng-if="entity.depth_interval != null && entity.depth_interval">({{ entity.depth_interval }})</span>
                </td>

                <td data-title="{{ 'SEARCH.SPECIMENS.STRATIGRAPHY' | translate }}">
                    <a href data-ng-click="ctrl.service.openInNewWindow({object:'stratigraphy',id:entity.stratigraphy_id})">
                        <localize en="entity.stratigraphy__stratigraphy_en" et="entity.stratigraphy__stratigraphy"/>
                    </a>

                    <div ng-if="entity.stratigraphy__stratigraphy_en == null && entity.stratigraphy__stratigraphy == null
                        && entity.stratigraphy_free != null"> {{ entity.stratigraphy_free }} </div>

                    <span ng-show="entity.stratigraphy__stratigraphy != null && entity.lithostratigraphy__stratigraphy != null">|</span>

                    <em>
                        <a href data-ng-click="ctrl.service.openInNewWindow({object:'stratigraphy',id:entity.lithostratigraphy_id})">
                            <localize en="entity.lithostratigraphy__stratigraphy_en" et="entity.lithostratigraphy__stratigraphy"/>
                        </a>
                    </em>
                </td>

                <td data-title="{{ 'SEARCH.SPECIMENS.COLLECTOR' | translate }}">
                    <div data-ng-if="entity.agent_collected__agent != null">
                        {{ entity.agent_collected__agent }}
                    </div>

                    <div data-ng-if="entity.agent_collected__agent == null">
                        {{ entity.agent_collected__forename }} {{ agent_collected__surename }}
                    </div>
                </td>

                <td data-title="{{ 'SEARCH.SPECIMENS.STATUS' | translate }}">
                    <localize data-ng-if="entity.original_status__value != null && entity.original_status__value_en != null"
                              et="entity.original_status__value" en="entity.original_status__value_en"/>
                </td>

                <td data-title="{{ 'SEARCH.SPECIMENS.IMAGES' | translate }}">
                    <a href data-ng-click="ctrl.service.openInNewWindow({object:'specimen',id:entity.id})">
                        <show-preview data-ng-if="entity.specimen_image_thumbnail.count > 0"
                                      img-url="'geokogud.info/'
                                      + entity.specimen_image_thumbnail.results[0].specimen__database__acronym.toLowerCase()
                                      + '/specimen_image/'
                                      + entity.specimen_image_thumbnail.results[0].image"/>
                    </a>
                </td>

            </tr>
        </tbody>
    </table>
    <div class="col-lg-12 h4 panel-heading text-center" data-ng-if="response.results == null">{{ 'SEARCH.NO_RESULTS' | translate }}</div>
</div>
<div ng-include="'app/templates/search/partial/pagination.html'" data-ng-if="!main.isGlobalSearch()"></div>